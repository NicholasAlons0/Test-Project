acs2017_ny$WORKHOMENV <-acs2017_ny$TRANWORK == 70
acs2017_ny$WORKSUBWAYNV <- acs2017_ny$TRANWORK == 33
#Run just the two codes above or just the two codes below.
WORKHOMENV <- (TRANWORK == 70)
WORKSUBWAYNV <-  (TRANWORK == 33)

dat_NYC <- subset(acs2017_ny, (acs2017_ny$in_NYC == 1) &(acs2017_ny$AGE > 20) & (acs2017_ny$AGE < 55))
detach(acs2017_ny)
attach(dat_NYC)
WORKHOMENV <- (TRANWORK == 70)
WORKSUBWAYNV <-  (TRANWORK == 33)
model_temp1 <- lm(TRANTIME ~ WORKHOMENV + WORKSUBWAYNV + AGE  + AfAm + educ_nohs + educ_hs + educ_somecoll
                  + educ_college + educ_advdeg)
summary(model_temp1)
confint(model_temp1)

# The null hypothesis in this case is that the education dummies have no relationship to TRANTIME, 
# while the alternative hypothesis is that there is a relationship with TRANTIME.
# nohs= realtion
# hs= realtion
#somecoll= no realtion
#colle= realtionship
#advance= NA
require(stargazer)
stargazer(model_temp1, title = "Regression", type = "text", dep.var.labels = "INCWAGE")
suppressMessages(require(AER))
NNobs <- length(TRANTIME)
set.seed(12345) 
graph_obs <- (runif(NNobs) < 0.1) 
dat_graph <- subset(dat_NYC,graph_obs)  
plot(TRANTIME ~ jitter(AGE, factor = 2), pch = 4, col = rgb(0.5, 0.5, 0.5, alpha = 0.2), ylim = c(0,150), data = dat_graph)
to_be_predicted2 <- data.frame(AGE = 20:55,  WORKHOMENV = 1, WORKSUBWAYNV = 1, AGE = 1, AfAm = 1, educ_nohs = 1, educ_hs = 1, educ_somecoll = 1, educ_college = 1, educ_advdeg = 0)
to_be_predicted2$yhat <- predict(model_temp1, newdata = to_be_predicted2)

Error: variables ‘WORKHOMENV’, ‘WORKSUBWAYNV’ were specified with different types from the fit
#Error only with created variables, all other variables will graph normally.



# Calculate predicted values for some people and assess if these seem plausible.
# Perhaps a graph of data and predicted values.
